{% extends 'base.html.twig' %}

{% block title %}{{ "requests_title" | trans }}{% endblock %}

{% block body %}
    <div class="wrapper">
        {{ include('language-menu.html.twig') }}
        <div class="wrapper-inner">
            {{ "content_bio" | trans | raw }}
            <!-- Icons by Ruslan Stepanov (http://hands-creative.com/icon/). License: CC BY 3.0 (http://creativecommons.org/licenses/by/3.0/)-->
            <div class="social-links">
                <a href="//github.com/corpsee" title="GitHub">
                    <img src="/app/social/github.png" width="48" height="48"/>
                </a>
                <a href="//habrahabr.ru/users/corpsee/" title="Habrahabr">
                    <img src="/app/social/habra.png" width="48" height="48"/>
                </a>
                <a href="//lastfm.ru/user/C0rpsee" title="Last.fm">
                    <img src="/app/social/lastfm.png" width="48" height="48"/>
                </a>
                <a href="//vk.com/corpsee" title="VKontakte">
                    <img src="/app/social/vk.png" width="48" height="48"/>
                </a>
                <a href="//twitter.com/poisoncorpsee" title="Twitter">
                    <img src="/app/social/twitter.png" width="48" height="48"/>
                </a>
                <a href="mailto:poisoncorpsee@gmail.com" title="Email: poisoncorpsee@gmail.com">
                    <img src="/app/social/email.png" width="48" height="48"/>
                </a>
            </div>

            {% if projects %}
                <h2>{{ "bio_projects_title" | trans }}</h2>

                <table class="projects">
                    {% for project in projects %}
                        <tr>
                            <td width="20%">
                                <a href="{{ project.link }}" title="{{ project.title }}">{{ project.title }}</a>
                            </td>
                            <td>
                                {{ project.description }} ({{ project.role }})
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}

            {% if pictures %}
                <h2>{{ "bio_pictures_title" | trans }}</h2>

                {% set i = 0 %}
                {% for picture in pictures %}
                    {% if i == 4 %}
                        {% set i = 1 %}
                    {% else %}
                        {% set i = i + 1 %}
                    {% endif %}

                    {% if i == 1 %}
                        <div class="img-str">
                            <div class="img-box first">
                                <a rel="lightbox[gallery]" href="/files/images/picture/{{ picture.image }}"
                                    class="pirobox_gr" title="«{{ picture.title }}» / {{ picture.drawnAt | date('Y-m-d') }}"><img
                                    src="/files/images/picture_gray/{{ picture.imageGray }}"
                                    id="{{ picture.image }}" data-min="{{ picture.imageMin }}" data-gray="{{ picture.imageGray }}" width="200" height="90" class="gr-col"
                                    alt="«{{ picture.title }}» / {{ picture.drawnAt | date('Y-m-d') }}"/></a>
                            </div>
                    {% elseif i == 4 %}
                            <div class="img-box last">
                                <a rel="lightbox[gallery]" href="/files/images/picture/{{ picture.image }}"
                                    class="pirobox_gr" title="«{{ picture.title }}» / {{ picture.drawnAt | date('Y-m-d') }}"><img
                                    src="/files/images/picture_gray/{{ picture.imageGray }}"
                                    id="{{ picture.image }}" data-min="{{ picture.imageMin }}" data-gray="{{ picture.imageGray }}" width="200" height="90" class="gr-col"
                                    alt="«{{ picture.title }}» / {{ picture.drawnAt | date('Y-m-d') }}"/></a>
                            </div>
                        </div>
                    {% else %}
                            <div class="img-box">
                                <a rel="lightbox[gallery]" href="/files/images/picture/{{ picture.image }}"
                                    class="pirobox_gr" title="«{{ picture.title }}» / {{ picture.drawnAt | date('Y-m-d') }}"><img
                                    src="/files/images/picture_gray/{{ picture.imageGray }}"
                                    id="{{ picture.image }}" data-min="{{ picture.imageMin }}" data-gray="{{ picture.imageGray }}" width="200" height="90" class="gr-col"
                                    alt="«{{ picture.title }}» / {{ picture.drawnAt | date('Y-m-d') }}"/></a>
                            </div>
                    {% endif %}
                {% endfor %}

                {% if i != 4 %}
                        </div>
                {% endif %}

                <div class="comeback">
                    <a href="{{ path('app_pictures', {_locale: locale}) }}" title="{{ "pictures_link" | trans }}">{{ "pictures_link" | trans }}</a>
                </div>
            {% endif %}

            {% if pullRequests %}
                <h2>{{ "bio_requests_title" | trans }}</h2>

                <table class="pull-requests">
                    {% for pullRequest in pullRequests %}
                        <tr>
                            <td>
                                <nobr>
                                    {{ pullRequest.createdAt | date("Y-m-d") }}
                                </nobr>
                            </td>
                            <td>
                                <div class="status status-{{ pullRequest.status }}">{{ pullRequest.status }}</div>
                            </td>
                            <td width="25%">
                                {{ pullRequest.repository }}
                            </td>
                            <td>
                                <a href="https://github.com/{{ pullRequest.repository }}/pull/{{ pullRequest.externalId }}">{{ pullRequest.title }}</a>
                            </td>
                        </tr>
                    {% endfor %}
                </table>

                <div class="comeback">
                    <a href="{{ path('app_pull_requests', {_locale: locale}) }}" title="{{ "requests_link" | trans }}">{{ "requests_link" | trans }}</a>
                </div>
            {% endif %}
        </div>
    </div>

    {{ include('footer.html.twig') }}

    <?= $scripts; ?>
{% endblock %}
